#!/bin/bash

###############################################
# 1. test 명령과 exit code 확인
###############################################
test 1 -eq 1         # 조건이 참이면 exit code == 0
echo "test 명령의 종료 코드 = $?"   # $? 는 직전 명령의 exit code


###############################################
# 2. 단일 bracket( [ ] ) 기본 비교
###############################################
test 1 -eq 1  && echo "[ ] : test: 1 -eq 1  → 참이므로 OK 출력"
[ 1 -eq 1 ] && echo "[ ] : 1 -eq 1  → 참이므로 OK 출력"


###############################################
# 3. 단일 bracket으로 파일/디렉터리 검사 (AND)
# ./etc/passwd 와 ./etc 는 현재 디렉토리 기준임
###############################################
if [ ! -f ./etc/passwd ] && [ ! -d ./etc ]; then
    echo "[ ] : 파일/디렉터리 모두 없음"
else
    echo "[ ] : 파일 또는 디렉터리 중 하나 이상 존재"
fi


###############################################
# 4. double bracket( [[ ]] ) 로 동일한 검사
# 내부에서 &&, || 등 논리연산 가능
###############################################
if [[ ! -f ./etc/passwd && ! -d ./etc ]]; then
    echo "[[ ]] : 파일/디렉터리 모두 없음"
else
    echo "[[ ]] : 파일 또는 디렉터리 중 하나 이상 존재"
fi


###############################################
# 5. double bracket + OR 조건 + 외부 ! 부정
# ! [[ A || B ]] == (!A && !B)  (De Morgan 법칙)
###############################################
echo "! [[ ]] 테스트"
if ! [[ -f ./etc/passwd || -d ./etc ]]; then
    echo "! [[ ]] : 파일/디렉터리 모두 없음"
else
    echo "! [[ ]] : 파일 또는 디렉터리 중 하나 이상 존재"
fi


###############################################
# 6. 빈 변수 검사 ( -z / -n )
# -z : 길이가 0이면 참 (빈 문자열)
# -n : 길이가 0이 아니면 참 (문자열 존재)
###############################################

# VAR=""   # 이 값을 주석 해제해보면 결과가 달라짐

if [ -z "$VAR" ]; then
    echo "VAR는 빈 변수입니다 (-z)"
fi

VAR="VARIABLE"

if [ -n "$VAR" ]; then
    echo "VAR에는 내용이 있습니다 (-n) → $VAR"
fi


###############################################
# 7. 권장: Bash 스크립트는 [[ ]] 방식 선호
# 안정성, 논리 확장, 정규식, 공백 처리 강점
###############################################
[[ -n "$VAR" && "$VAR" =~ ^V ]] && echo "VAR은 V로 시작됩니다 (정규식 =~)"


###############################################
# 끝
###############################################
echo "실습 종료!"

